(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"36cf":function(n,t,e){"use strict";e.r(t);var o=e("c050"),c=e.n(o);for(var i in o)"default"!==i&&function(n){e.d(t,n,(function(){return o[n]}))}(i);t["default"]=c.a},"380d":function(n,t,e){"use strict";(function(n){e("3e63"),e("921b");o(e("66fd"));var t=o(e("3c9e"));function o(n){return n&&n.__esModule?n:{default:n}}n(t.default)}).call(this,e("543d")["createPage"])},"3c9e":function(n,t,e){"use strict";e.r(t);var o=e("905b"),c=e("36cf");for(var i in c)"default"!==i&&function(n){e.d(t,n,(function(){return c[n]}))}(i);e("a6f9");var s,u=e("f0c5"),a=Object(u["a"])(c["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=a.exports},"905b":function(n,t,e){"use strict";var o,c=function(){var n=this,t=n.$createElement;n._self._c},i=[];e.d(t,"b",(function(){return c})),e.d(t,"c",(function(){return i})),e.d(t,"a",(function(){return o}))},a6f9:function(n,t,e){"use strict";var o=e("c1c5"),c=e.n(o);c.a},c050:function(n,t,e){"use strict";(function(n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e={data:function(){return{userInfo:{},loginInfo:{},code:"",session:"",logined:!1}},methods:{goNext:function(){n.navigateTo({url:"/pages/consult/consult"})},getInfoCallback:function(n){if(console.log("e",n),n.detail&&"getUserInfo:ok"==n.detail.errMsg){var t=n.detail.userInfo;this.userInfo=t,this.goConsult()}else this.$notice.msg("您已拒绝了授权！")},goConsult:function(){var n=this.userInfo,t={city:n["city"],country:n["country"],ico:n["avatarUrl"],nick:n["nickName"],province:n["province"],sex:n["gender"]};this.userAuth(t)},userAuth:function(t){this.$http({url:"/api/auth",data:t}).then((function(e){console.log("=成功!",e),n.setStorageSync("userInfo",t),n.navigateTo({url:"/pages/consult/consult"})})).catch((function(n){console.log("=err",n)}))},goLogin:function(t){var e=this;this.$http({url:"/api/login",method:"GET",data:{code:t}}).then((function(t){console.log("成功!",t),e.session=t.data.session,n.setStorageSync("session",e.session),n.setStorageSync("userInfo",t.data),e.logined=!0,n.hideLoading()})).catch((function(t){console.log("==err",t),e.session=t.data.session,n.setStorageSync("session",e.session),n.hideLoading()}))},getWxCode:function(){var t=this;n.login({provider:"weixin",success:function(n){console.log(n),n.code?(t.code=n.code,t.goLogin(n.code)):t.$notice.alert("获取微信code失败，异常原因："+n.errMsg)}})}},mounted:function(){n.showLoading({title:"加载中"}),this.getWxCode()},onShow:function(){this.$tools.getRecentVersion()}};t.default=e}).call(this,e("543d")["default"])},c1c5:function(n,t,e){}},[["380d","common/runtime","common/vendor"]]]);