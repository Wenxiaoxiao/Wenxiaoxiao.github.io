(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/consult/consult"],{"685f":function(e,t,n){"use strict";(function(e){n("3e63"),n("921b");o(n("66fd"));var t=o(n("69e3"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},"69e3":function(e,t,n){"use strict";n.r(t);var o=n("6a1e"),s=n("8173");for(var i in s)"default"!==i&&function(e){n.d(t,e,(function(){return s[e]}))}(i);n("fa90");var a,r=n("f0c5"),l=Object(r["a"])(s["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],a);t["default"]=l.exports},"6a1e":function(e,t,n){"use strict";var o,s=function(){var e=this,t=e.$createElement;e._self._c},i=[];n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}))},"6fbf":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){n.e("components/insureTree/insureTree").then(function(){return resolve(n("015e"))}.bind(null,n)).catch(n.oe)},s={data:function(){return{yearFlag:!0,showResult:0,QUES_ILLS:[],windowHeight:1300,scrollView:10,scrollDirection:"vertical",scrollTop:1600,hotIll:[],lookIll:[],insureStyles:[{label:"重疾",value:1},{label:"医疗",value:2},{label:"意外",value:3},{label:"寿险",value:4}],insureStyle:1,illList:[],questionShow:!1,questionJson:[],questionJsons:[],diseaseIds:[],recommendProducts:[],consultLoading:!1,pointList:[],sex:"",sexData:[{type:"1",text:"男",chosed:!1,src:n("5cfc")},{type:"2",text:"女",chosed:!1,src:n("c026")}],year:{defaultIndex:null,yearsIndex:null,year:"",yearArr:[]},imgsrc1:"",showReVerify:!1,userInfo:Object}},components:{"insure-tree":o},methods:{onShareAppMessage:function(e){return"button"===e.from&&console.log("res.target",e.target),{title:"身体有些小毛病可以投保吗，快来问问梧桐树核保助手",path:"/pages/index/index",imageUrl:"../../static/images/share.jpg"}},choseHotIll:function(t){console.log("value",t),e.navigateTo({url:"/pages/illList/illList?diseaseId="+t.diseaseId})},scrollToBottom:function(e){var t=this;wx.createSelectorQuery().selectAll(".scrollheight").boundingClientRect((function(n){if(n){var o=0;n.map((function(e,t){t===n.length-1||(o+=e.height)}));var s=2*o+2*e;t.scrollTop=s}})).exec()},goExpert:function(){e.navigateTo({url:"/pages/webView/webView"})},reVerify:function(){getApp().globalData.SURE_QUES_ILLS=[],this.questionJsons=[],this.questionJson=[],this.diseaseIds=[],this.recommendProducts=[],this.sex="",this.year.year="",this.showResult=0;var t=new Date,n=t.getFullYear();this.year.yearsIndex=this.year.defaultIndex=n-1940,this.sexData.map((function(e){e.chosed=!1})),e.navigateTo({url:"/pages/illList/illList"})},goIllList:function(){this.reVerify()},questionShowOrNot:function(e,t,n){this.recommendProducts[t].infos[n].questionShow=e},choseSex:function(e){this.recommendProducts=[];var t=this.sexData;t.map((function(n,o){t[o].chosed=o==e})),this.sex=t[e].type,this.getProductsList(),this.scrollBottom()},bindPickerChange:function(e){if(this.recommendProducts=[],this.year.yearsIndex=this.year.defaultIndex=e.detail.value,console.log("e.detail.value",e.detail.value),0!=e.detail.value){this.year.year=this.year.yearArr[e.detail.value],this.scrollBottom();var t=this;setTimeout((function(){t.getProductsList()}),100)}},getProductsList:function(){var e,t,n,o=this,s=this,i=function t(n,o){n.forEach((function(n){if(n.id==o)return e=n,n;n.children.length>0&&t(n.children,o)}))},a=function n(o,s,a){i(o,s);if(-1!==a.indexOf(e.parentId))return t=e,t;n(o,e.parentId,a)},r=function t(o,s){i(o,s);if("0"!==e.parentId)t(o,e.parentId);else if("0"===e.parentId)return n=e,n};""!==s.year.year&&""!==s.insureStyle&&""!==s.sex&&this.$http({url:"/api/recommends",data:{birthday:s.year.year,diseaseIds:s.diseaseIds,policyType:[1],sex:s.sex},method:"POST"}).then((function(e){console.log("成功!",e);var l=e.data;l.length>0?o.showResult=1:o.showResult=2,o.$http({url:"/api/allHealths",method:"GET"}).then((function(e){var o=e.data,c=[];o.map((function(e){console.log("itm",e),c.push(e.id)})),l.map((function(e,l){e.infos.map((function(e,l){e["questionShow"]=!1;i(o,e.diseaseId),a(o,e.diseaseId,c),r(o,e.diseaseId);e["title"]=t.content;s.questionJson.map((function(t){if(t.id===n.id){var o=[],s=function e(t){var n={content:"",chosedType:""};2===t.type&&1===t.choosed&&(n.content=t.content,t.children.map((function(e){1===e.choosed&&3===e.type&&e.parentId===t.id&&(n.chosedType=e.content)})),o.push(n)),t.children.length>0&&t.children.forEach((function(t){e(t)}))};s(t);console.log("quesList1",o),e["question"]=o}}))}))})),setTimeout((function(){s.recommendProducts=l,s.consultLoading=!1,s.$forceUpdate(),s.scrollBottom()}),0)}))})).catch((function(e){console.log(e)}))},choseStyle:function(e){this.consultLoading=!0,this.insureStyle=e,this.scrollBottom(),this.getProductsList()},getAllDiseaseIds:function(){var e=[],t=function t(n){n.forEach((function(n){-1===e.indexOf(n.id)&&1===n.choosed&&e.push(n.id),n.children.length>0&&t(n.children)}))},n=getApp().globalData.SURE_QUES_ILLS;if(n&&n instanceof Array){t(n);console.log("QUES_ILLS",n),this.diseaseIds=e}},getListANames:function(){var e=!1,t=function t(n){n.map((function(n){if(2==n.type)return e=!0,!1;n.children&&n.children.length>0&&t(n.children)}))},n=getApp().globalData.SURE_QUES_ILLS;if(n&&n instanceof Array&&n.length>0){var o=[];n.forEach((function(e){console.log("item",e),1==e.choosed&&e.children.map((function(e){o.push(e.content)}))})),this.questionJsons=o,console.log("tmpArr",o);t(n);e&&(this.questionJson=n),console.log("this.questionJson",this.questionJson),this.showReVerify=!0,this.scrollBottom()}},scrollBottom:function(){var t=this;setTimeout((function(){var n=e.createSelectorQuery().in(t);n.select("#scrollDom").boundingClientRect((function(e){console.log("得到布局位置信息",e),t.scrollTop=t.scrollTop+500,console.log(t.scrollTop)})).exec()}),500)},setDefaultYear:function(){var e=this;setTimeout((function(){e.yearFlag=!1}),1e3)}},mounted:function(){var t=this;this.$http({url:"/api/hotDiseases",method:"GET"}).then((function(e){console.log("res.data===",e.data),t.hotIll=e.data})).catch((function(e){console.log("==err",e)}));var n=e.getStorageSync("userInfo");console.log("userInfo",n),n&&(this.imgsrc1=n.ico),e.getSystemInfo({success:function(e){t.windowHeight=e.windowHeight}})},onShow:function(){this.getListANames(),this.getAllDiseaseIds(),this.QUES_ILLS=getApp().globalData.SURE_QUES_ILLS,console.log("this.QUES_ILLS",this.QUES_ILLS),console.log("this.year",this.year),this.$tools.getRecentVersion();for(var e=new Date,t=e.getFullYear(),n=[],o=t,s=0;o>=1940;o--,s++)n.push(o),""!==this.year.year?(this.yearFlag=!1,o===this.year.year&&(this.year.yearsIndex=this.year.defaultIndex=s)):(this.yearFlag=!0,1990===o&&(this.year.yearsIndex=this.year.defaultIndex=s));this.year.yearArr=n}};t.default=s}).call(this,n("543d")["default"])},7022:function(e,t,n){},8173:function(e,t,n){"use strict";n.r(t);var o=n("6fbf"),s=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=s.a},fa90:function(e,t,n){"use strict";var o=n("7022"),s=n.n(o);s.a}},[["685f","common/runtime","common/vendor"]]]);